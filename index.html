<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fruit PLU Scanner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Kode+Mono:wght@400..700&display=swap" rel="stylesheet" />

  <style>
    html {
      background-color: white;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Kode Mono', monospace;
      background-color: #ffffff;
      color: black;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container {
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
      box-sizing: border-box;
      position: relative;
    }

    .info-button {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 28px;
      height: 28px;
      border: 2px solid black;
      border-radius: 50%;
      background-color: white;
      color: black;
      font-family: 'Kode Mono', monospace;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s ease;
      z-index: 10;
    }

    .info-button:hover {
      background-color: #f0f0f0;
    }

    .info {
      font-size: 14px;
      line-height: 1.6;
    }

    .center-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
    }

    .manual-entry {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      width: 280px;
      box-sizing: border-box;
    }

    .manual-entry input {
      flex: 1;
      padding: 10px;
      border: 2px solid black;
      border-radius: 8px;
      font-family: 'Kode Mono', monospace;
      font-size: 14px;
      text-align: center;
      margin-right: 20px;
    }

    .manual-entry button {
      width: 90px;
      padding: 10px;
      border: 2px solid black;
      border-radius: 8px;
      background: white;
      font-family: 'Kode Mono', monospace;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .manual-entry button:hover {
      background: black;
      color: white;
    }

    .scanner-frame {
      width: 280px;
      height: 100px;
      border: 2px solid black;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-sizing: border-box;
    }

    .scanner-frame span {
      font-size: 24px;
      font-weight: bold;
      animation: bounce 1s infinite alternate;
    }

    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-8px); }
    }

    .click-text {
      margin-top: 6px;
      font-size: 14px;
    }

    @media (max-width: 400px) {
      .scanner-frame {
        width: 80%;
        height: 80px;
      }

      .manual-entry {
        width: 80%;
      }

      .manual-entry input {
        margin-right: 12px;
      }

      .info {
        font-size: 12px;
      }

      .click-text {
        font-size: 13px;
      }
    }

    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #ED228D;
      color: black;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-family: 'Kode Mono', monospace;
      z-index: 9999;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s ease;
      overflow: hidden;
    }

    #loading-overlay.visible {
      visibility: visible;
      opacity: 1;
    }

    .loading-text {
      font-size: 18px;
      margin-bottom: 20px;
      color: yellow;
    }

    .loading-bar {
      width: 80%;
      max-width: 300px;
      height: 10px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 5px;
      overflow: hidden;
    }

    .loading-bar-inner {
      width: 0%;
      height: 100%;
      background: yellow;
      animation: loading 1.5s infinite;
    }

    @keyframes loading {
      0% { width: 0%; }
      50% { width: 100%; }
      100% { width: 0%; }
    }

    #info-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(6px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9998;
      padding: 20px;
      box-sizing: border-box;
    }

    #info-modal .modal-content {
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid black;
      border-radius: 12px;
      padding: 24px;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      color: black;
      font-family: 'Kode Mono', monospace;
      font-size: 14px;
      line-height: 1.6;
      position: relative;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    #info-modal .modal-content p {
      text-align: left;
      margin: 0;
      hyphens: auto;
      -webkit-hyphens: auto;
    }

    #info-modal .close-btn {
      position: absolute;
      top: 10px;
      right: 14px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      border: none;
      background: none;
      color: black;
    }

    #info-modal .close-btn:hover {
      color: red;
    }
  </style>
</head>
<body>

  <div id="loading-overlay">
    <div class="loading-text">Pulling from preexisting archive</div>
    <div class="loading-bar">
      <div class="loading-bar-inner"></div>
    </div>
  </div>

  <div id="info-modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">✕</button>
      <p>
        <strong>What is a PLU code?</strong><br><br>
        A PLU (Price Look-Up) code is a four or five-digit number on a sticker on fresh produce that identifies the item for cashiers to ring up at the register. These individual codes help retailers track inventory and ensure correct pricing, and they also provide consumers with information about how the produce was grown. There are over 1,500 global Price Look Up codes assigned by the International Federation for Produce Standards (IFPS). Use this site to scan or search fruit PLU codes to find out more information.
      </p>
    </div>
  </div>

  <div class="container">
    <!-- ℹ️ Info Button -->
    <div class="info-button" onclick="openModal()">i</div>

    <div class="info">
      Subject: Unknown<br>
      Code: #FFFFFF<br>
      PLU: Unknown
    </div>

    <div class="center-wrapper">
      <div class="manual-entry">
        <input id="pluInput" type="text" placeholder="manually enter PLU" maxlength="5" />
        <button onclick="submitPLU()">submit</button>
      </div>

      <div onclick="window.location.href='scan.html'" class="scanner-frame">
        <span>+</span>
      </div>

      <div class="click-text">Click to start scanning</div>
    </div>
  </div>

  <script>
    function submitPLU() {
      const input = document.getElementById('pluInput').value.trim();
      const loadingOverlay = document.getElementById('loading-overlay');

      if (/^\d{4,5}$/.test(input)) {
        loadingOverlay.classList.add('visible');
        document.body.style.overflow = 'hidden';

        setTimeout(() => {
          window.location.href = `fruit.html?plu=${input}`;
        }, 1500);
      } else {
        alert("Please enter a valid 4- or 5-digit PLU code.");
      }
    }

    function openModal() {
      document.getElementById('info-modal').style.display = 'flex';
    }

    function closeModal() {
      document.getElementById('info-modal').style.display = 'none';
    }
  </script>

</body>
</html>
